/**
 * @remix-run/router v1.0.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M.apply(this,arguments)}var T;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(T||(T={}));const Ne="popstate";function Yt(e){e===void 0&&(e={});function t(n,a){let{pathname:d,search:l,hash:f}=n.location;return G("",{pathname:d,search:l,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Ee(a)}return yt(t,r,null,e)}function vt(){return Math.random().toString(36).substr(2,8)}function Oe(e){return{usr:e.state,key:e.key}}function G(e,t,r,n){return r===void 0&&(r=null),M({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Y(t):t,{state:r,key:t&&t.key||n||vt()})}function Ee(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Y(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function yt(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:d=!1}=n,l=a.history,f=T.Pop,m=null;function p(){f=T.Pop,m&&m({action:f,location:i.location})}function u(w,S){f=T.Push;let D=G(i.location,w,S);r&&r(D,w);let N=Oe(D),A=i.createHref(D);try{l.pushState(N,"",A)}catch{a.location.assign(A)}d&&m&&m({action:f,location:D})}function y(w,S){f=T.Replace;let D=G(i.location,w,S);r&&r(D,w);let N=Oe(D),A=i.createHref(D);l.replaceState(N,"",A),d&&m&&m({action:f,location:D})}let i={get action(){return f},get location(){return e(a,l)},listen(w){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(Ne,p),m=w,()=>{a.removeEventListener(Ne,p),m=null}},createHref(w){return t(a,w)},push:u,replace:y,go(w){return l.go(w)}};return i}var j;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(j||(j={}));function Qe(e,t,r){return t===void 0&&(t=[]),r===void 0&&(r=new Set),e.map((n,a)=>{let d=[...t,a],l=typeof n.id=="string"?n.id:d.join("-");return C(!r.has(l),'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),r.add(l),M({},n,{id:l,children:n.children?Qe(n.children,d,r):void 0})})}function ue(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?Y(t):t,a=Ft(n.pathname||"/",r);if(a==null)return null;let d=Xe(e);wt(d);let l=null;for(let f=0;l==null&&f<d.length;++f)l=xt(d[f],a);return l}function Xe(e,t,r,n){return t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n=""),e.forEach((a,d)=>{let l={relativePath:a.path||"",caseSensitive:a.caseSensitive===!0,childrenIndex:d,route:a};l.relativePath.startsWith("/")&&(C(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let f=he([n,l.relativePath]),m=r.concat(l);a.children&&a.children.length>0&&(C(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Xe(a.children,t,m,f)),!(a.path==null&&!a.index)&&t.push({path:f,score:St(f,a.index),routesMeta:m})}),t}function wt(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:At(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const bt=/^:\w+$/,Dt=3,Rt=2,Pt=1,Et=10,Mt=-2,_e=e=>e==="*";function St(e,t){let r=e.split("/"),n=r.length;return r.some(_e)&&(n+=Mt),t&&(n+=Rt),r.filter(a=>!_e(a)).reduce((a,d)=>a+(bt.test(d)?Dt:d===""?Pt:Et),n)}function At(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function xt(e,t){let{routesMeta:r}=e,n={},a="/",d=[];for(let l=0;l<r.length;++l){let f=r[l],m=l===r.length-1,p=a==="/"?t:t.slice(a.length)||"/",u=Ct({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},p);if(!u)return null;Object.assign(n,u.params);let y=f.route;d.push({params:n,pathname:he([a,u.pathname]),pathnameBase:Ot(he([a,u.pathnameBase])),route:y}),u.pathnameBase!=="/"&&(a=he([a,u.pathnameBase]))}return d}function Ct(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Lt(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let d=a[0],l=d.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:n.reduce((p,u,y)=>{if(u==="*"){let i=f[y]||"";l=d.slice(0,d.length-i.length).replace(/(.)\/+$/,"$1")}return p[u]=Tt(f[y]||"",u),p},{}),pathname:d,pathnameBase:l,pattern:e}}function Lt(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Je(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(l,f)=>(n.push(f),"([^\\/]+)"));return e.endsWith("*")?(n.push("*"),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a+=r?"\\/*$":"(?:(?=[@.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[new RegExp(a,t?void 0:"i"),n]}function Tt(e,t){try{return decodeURIComponent(e)}catch(r){return Je(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function Ft(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function C(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Je(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function jt(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Y(e):e;return{pathname:r?r.startsWith("/")?r:Nt(r,t):t,search:_t(n),hash:Ut(a)}}function Nt(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Qt(e,t,r,n){n===void 0&&(n=!1);let a=typeof e=="string"?Y(e):M({},e),d=e===""||a.pathname==="",l=d?"/":a.pathname,f;if(n||l==null)f=r;else{let y=t.length-1;if(l.startsWith("..")){let i=l.split("/");for(;i[0]==="..";)i.shift(),y-=1;a.pathname=i.join("/")}f=y>=0?t[y]:"/"}let m=jt(a,f),p=l&&l!=="/"&&l.endsWith("/"),u=(d||l===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(p||u)&&(m.pathname+="/"),m}const he=e=>e.join("/").replace(/\/\/+/g,"/"),Ot=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_t=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ut=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Ue extends Error{}class Bt{constructor(t){this.pendingKeys=new Set,this.subscriber=void 0,C(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let r;this.abortPromise=new Promise((a,d)=>r=d),this.controller=new AbortController;let n=()=>r(new Ue("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",n),this.controller.signal.addEventListener("abort",n),this.data=Object.entries(t).reduce((a,d)=>{let[l,f]=d;return Object.assign(a,{[l]:this.trackPromise(l,f)})},{})}trackPromise(t,r){if(!(r instanceof Promise))return r;this.pendingKeys.add(t);let n=Promise.race([r,this.abortPromise]).then(a=>this.onSettle(n,t,null,a),a=>this.onSettle(n,t,a));return n.catch(()=>{}),Object.defineProperty(n,"_tracked",{get:()=>!0}),n}onSettle(t,r,n,a){if(this.controller.signal.aborted&&n instanceof Ue)return this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>n}),Promise.reject(n);this.pendingKeys.delete(r),this.done&&this.unlistenAbortSignal();const d=this.subscriber;return n?(Object.defineProperty(t,"_error",{get:()=>n}),d&&d(!1),Promise.reject(n)):(Object.defineProperty(t,"_data",{get:()=>a}),d&&d(!1),a)}subscribe(t){this.subscriber=t}cancel(){this.controller.abort(),this.pendingKeys.forEach((r,n)=>this.pendingKeys.delete(n));let t=this.subscriber;t&&t(!0)}async resolveData(t){let r=!1;if(!this.done){let n=()=>this.cancel();t.addEventListener("abort",n),r=await new Promise(a=>{this.subscribe(d=>{t.removeEventListener("abort",n),(d||this.done)&&a(d)})})}return r}get done(){return this.pendingKeys.size===0}get unwrappedData(){return C(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,r)=>{let[n,a]=r;return Object.assign(t,{[n]:$t(a)})},{})}}function Wt(e){return e instanceof Promise&&e._tracked===!0}function $t(e){if(!Wt(e))return e;if(e._error)throw e._error;return e._data}class k{constructor(t,r,n){this.status=t,this.statusText=r||"",this.data=n}}function It(e){return e instanceof k}const De={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Ht={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};function Xt(e){C(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let t=Qe(e.routes),r=null,n=new Set,a=null,d=null,l=null,f=!1,m=ue(t,e.history.location,e.basename),p=null;if(m==null){let{matches:o,route:s,error:c}=He(t);m=o,p={[s.id]:c}}let u=!m.some(o=>o.route.loader)||e.hydrationData!=null,y,i={historyAction:e.history.action,location:e.history.location,matches:m,initialized:u,navigation:De,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||p,fetchers:new Map},w=T.Pop,S=!1,D,N=!1,A=!1,B=[],ee=[],x=new Map,Se=0,ge=-1,te=new Map,se=new Set,Q=new Map,K=new Map;function tt(){return r=e.history.listen(o=>{let{action:s,location:c}=o;return X(s,c)}),i.initialized||X(T.Pop,i.location),y}function rt(){r&&r(),n.clear(),D&&D.abort(),i.fetchers.forEach((o,s)=>ye(s))}function nt(o){return n.add(o),()=>n.delete(o)}function _(o){i=M({},i,o),n.forEach(s=>s(i))}function re(o,s){let c=i.actionData!=null&&i.navigation.formMethod!=null&&i.navigation.state==="loading",h=s.loaderData?{loaderData:Pe(i.loaderData,s.loaderData,s.matches||[])}:{};_(M({},c?{}:{actionData:null},s,h,{historyAction:w,location:o,initialized:!0,navigation:De,revalidation:"idle",restoreScrollPosition:i.navigation.formData?!1:Te(o,s.matches||i.matches),preventScrollReset:S})),N||w===T.Pop||(w===T.Push?e.history.push(o,o.state):w===T.Replace&&e.history.replace(o,o.state)),w=T.Pop,S=!1,N=!1,A=!1,B=[],ee=[]}async function at(o,s){if(typeof o=="number"){e.history.go(o);return}let{path:c,submission:h,error:g}=Be(o,s),P=G(i.location,c,s&&s.state),b=(s&&s.replace)===!0||h!=null?T.Replace:T.Push,v=s&&"preventScrollReset"in s?s.preventScrollReset===!0:void 0;return await X(b,P,{submission:h,pendingError:g,preventScrollReset:v,replace:s&&s.replace})}function it(){if(pe(),_({revalidation:"loading"}),i.navigation.state!=="submitting"){if(i.navigation.state==="idle"){X(i.historyAction,i.location,{startUninterruptedRevalidation:!0});return}X(w||i.historyAction,i.navigation.location,{overrideNavigation:i.navigation})}}async function X(o,s,c){D&&D.abort(),D=null,w=o,N=(c&&c.startUninterruptedRevalidation)===!0,ht(i.location,i.matches),S=(c&&c.preventScrollReset)===!0;let h=c&&c.overrideNavigation,g=ue(t,s,e.basename);if(!g){let{matches:W,route:$,error:z}=He(t);we(),re(s,{matches:W,loaderData:{},errors:{[$.id]:z}});return}if(Gt(i.location,s)){re(s,{matches:g});return}D=new AbortController;let P=oe(s,D.signal,c&&c.submission),b,v;if(c&&c.pendingError)v={[Z(g).route.id]:c.pendingError};else if(c&&c.submission){let W=await ot(P,s,c.submission,g,{replace:c.replace});if(W.shortCircuited)return;b=W.pendingActionData,v=W.pendingActionError,h=M({state:"loading",location:s},c.submission)}let{shortCircuited:R,loaderData:E,errors:L}=await lt(P,s,g,h,c&&c.submission,c&&c.replace,b,v);R||(D=null,re(s,{matches:g,loaderData:E,errors:L}))}async function ot(o,s,c,h,g){pe();let P=M({state:"submitting",location:s},c);_({navigation:P});let b,v=Ye(h,s);if(!v.route.action)b=Ke(s);else if(b=await ie("action",o,v),o.signal.aborted)return{shortCircuited:!0};if(q(b)){let R=M({state:"loading",location:G(i.location,b.location)},c);return await ne(b,R,g&&g.replace),{shortCircuited:!0}}if(le(b)){let R=Z(h,v.route.id);return(g&&g.replace)!==!0&&(w=T.Push),{pendingActionError:{[R.route.id]:b.error}}}if(V(b))throw new Error("defer() is not supported in actions");return{pendingActionData:{[v.route.id]:b.data}}}async function lt(o,s,c,h,g,P,b,v){let R=h;R||(R={state:"loading",location:s,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0});let[E,L]=We(i,c,g,s,A,B,ee,b,v,Q);if(we(F=>!(c&&c.some(O=>O.route.id===F))||E&&E.some(O=>O.route.id===F)),E.length===0&&L.length===0)return re(s,{matches:c,loaderData:Pe(i.loaderData,{},c),errors:v||null,actionData:b||null}),{shortCircuited:!0};N||(L.forEach(F=>{let[O]=F;const H=i.fetchers.get(O);let fe={state:"loading",data:H&&H.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};i.fetchers.set(O,fe)}),_(M({navigation:R,actionData:b||i.actionData||null},L.length>0?{fetchers:new Map(i.fetchers)}:{}))),ge=++Se,L.forEach(F=>{let[O]=F;return x.set(O,D)});let{results:W,loaderResults:$,fetcherResults:z}=await xe(i.matches,E,L,o);if(o.signal.aborted)return{shortCircuited:!0};L.forEach(F=>{let[O]=F;return x.delete(O)});let ae=ze(W);if(ae){let F=Re(i,ae);return await ne(ae,F,P),{shortCircuited:!0}}let{loaderData:ce,errors:J}=Ie(i,c,E,$,v,L,z,K);K.forEach((F,O)=>{F.subscribe(H=>{(H||F.done)&&K.delete(O)})}),ft();let be=Le(ge);return M({loaderData:ce,errors:J},be||L.length>0?{fetchers:new Map(i.fetchers)}:{})}function Ae(o){return i.fetchers.get(o)||Ht}function st(o,s,c,h){if(typeof AbortController>"u")throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");x.has(o)&&de(o);let g=ue(t,c,e.basename);if(!g){ve(o,s,new k(404,"Not Found",null));return}let{path:P,submission:b}=Be(c,h,!0),v=Ye(g,P);if(b){dt(o,s,P,v,b);return}Q.set(o,[P,v]),ct(o,s,P,v)}async function dt(o,s,c,h,g){if(pe(),Q.delete(o),!h.route.action){let{error:U}=Ke(c);ve(o,s,U);return}let P=i.fetchers.get(o),b=M({state:"submitting"},g,{data:P&&P.data});i.fetchers.set(o,b),_({fetchers:new Map(i.fetchers)});let v=new AbortController,R=oe(c,v.signal,g);x.set(o,v);let E=await ie("action",R,h);if(R.signal.aborted){x.get(o)===v&&x.delete(o);return}if(q(E)){x.delete(o),se.add(o);let U=M({state:"loading"},g,{data:void 0});i.fetchers.set(o,U),_({fetchers:new Map(i.fetchers)});let I=M({state:"loading",location:G(i.location,E.location)},g);await ne(E,I);return}if(le(E)){ve(o,s,E.error);return}V(E)&&C(!1,"defer() is not supported in actions");let L=i.navigation.location||i.location,W=oe(L,v.signal),$=i.navigation.state!=="idle"?ue(t,i.navigation.location,e.basename):i.matches;C($,"Didn't find any matches after fetcher action");let z=++Se;te.set(o,z);let ae=M({state:"loading",data:E.data},g);i.fetchers.set(o,ae);let[ce,J]=We(i,$,g,L,A,B,ee,{[h.route.id]:E.data},void 0,Q);J.filter(U=>{let[I]=U;return I!==o}).forEach(U=>{let[I]=U,je=i.fetchers.get(I),pt={state:"loading",data:je&&je.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};i.fetchers.set(I,pt),x.set(I,v)}),_({fetchers:new Map(i.fetchers)});let{results:be,loaderResults:F,fetcherResults:O}=await xe(i.matches,ce,J,W);if(v.signal.aborted)return;te.delete(o),x.delete(o),J.forEach(U=>{let[I]=U;return x.delete(I)});let H=ze(be);if(H){let U=Re(i,H);await ne(H,U);return}let{loaderData:fe,errors:Fe}=Ie(i,i.matches,ce,F,void 0,J,O,K),mt={state:"idle",data:E.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};i.fetchers.set(o,mt);let gt=Le(z);i.navigation.state==="loading"&&z>ge?(C(w,"Expected pending action"),D&&D.abort(),re(i.navigation.location,{matches:$,loaderData:fe,errors:Fe,fetchers:new Map(i.fetchers)})):(_(M({errors:Fe,loaderData:Pe(i.loaderData,fe,$)},gt?{fetchers:new Map(i.fetchers)}:{})),A=!1)}async function ct(o,s,c,h){let g=i.fetchers.get(o),P={state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,data:g&&g.data};i.fetchers.set(o,P),_({fetchers:new Map(i.fetchers)});let b=new AbortController,v=oe(c,b.signal);x.set(o,b);let R=await ie("loader",v,h);if(V(R)&&(R=await ke(R,v.signal,!0)||R),x.get(o)===b&&x.delete(o),v.signal.aborted)return;if(q(R)){let L=Re(i,R);await ne(R,L);return}if(le(R)){let L=Z(i.matches,s);i.fetchers.delete(o),_({fetchers:new Map(i.fetchers),errors:{[L.route.id]:R.error}});return}C(!V(R),"Unhandled fetcher deferred data");let E={state:"idle",data:R.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};i.fetchers.set(o,E),_({fetchers:new Map(i.fetchers)})}async function ne(o,s,c){o.revalidate&&(A=!0),C(s.location,"Expected a location on the redirect navigation"),D=null;let h=c===!0?T.Replace:T.Push;await X(h,s.location,{overrideNavigation:s})}async function xe(o,s,c,h){let g=await Promise.all([...s.map(v=>ie("loader",h,v)),...c.map(v=>{let[,R,E]=v;return ie("loader",oe(R,h.signal),E)})]),P=g.slice(0,s.length),b=g.slice(s.length);return await Promise.all([Ve(o,s,P,h.signal,!1,i.loaderData),Ve(o,c.map(v=>{let[,,R]=v;return R}),b,h.signal,!0)]),{results:g,loaderResults:P,fetcherResults:b}}function pe(){A=!0,B.push(...we()),Q.forEach((o,s)=>{x.has(s)&&(ee.push(s),de(s))})}function ve(o,s,c){let h=Z(i.matches,s);ye(o),_({errors:{[h.route.id]:c},fetchers:new Map(i.fetchers)})}function ye(o){x.has(o)&&de(o),Q.delete(o),te.delete(o),se.delete(o),i.fetchers.delete(o)}function de(o){let s=x.get(o);C(s,"Expected fetch controller: "+o),s.abort(),x.delete(o)}function Ce(o){for(let s of o){let c=Ae(s),h={state:"idle",data:c.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};i.fetchers.set(s,h)}}function ft(){let o=[];for(let s of se){let c=i.fetchers.get(s);C(c,"Expected fetcher: "+s),c.state==="loading"&&(se.delete(s),o.push(s))}Ce(o)}function Le(o){let s=[];for(let[c,h]of te)if(h<o){let g=i.fetchers.get(c);C(g,"Expected fetcher: "+c),g.state==="loading"&&(de(c),te.delete(c),s.push(c))}return Ce(s),s.length>0}function we(o){let s=[];return K.forEach((c,h)=>{(!o||o(h))&&(c.cancel(),s.push(h),K.delete(h))}),s}function ut(o,s,c){if(a=o,l=s,d=c||(h=>h.key),!f&&i.navigation===De){f=!0;let h=Te(i.location,i.matches);h!=null&&_({restoreScrollPosition:h})}return()=>{a=null,l=null,d=null}}function ht(o,s){if(a&&d&&l){let c=s.map(g=>Ge(g,i.loaderData)),h=d(o,c)||o.key;a[h]=l()}}function Te(o,s){if(a&&d&&l){let c=s.map(P=>Ge(P,i.loaderData)),h=d(o,c)||o.key,g=a[h];if(typeof g=="number")return g}return null}return y={get basename(){return e.basename},get state(){return i},get routes(){return t},initialize:tt,subscribe:nt,enableScrollRestoration:ut,navigate:at,fetch:st,revalidate:it,createHref:me,getFetcher:Ae,deleteFetcher:ye,dispose:rt,_internalFetchControllers:x,_internalActiveDeferreds:K},y}function Be(e,t,r){r===void 0&&(r=!1);let n=typeof e=="string"?e:Ee(e);if(!t||!("formMethod"in t)&&!("formData"in t))return{path:n};if(t.formMethod!=null&&t.formMethod!=="get")return{path:n,submission:{formMethod:t.formMethod,formAction:me(Y(n)),formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:t.formData}};if(!t.formData)return{path:n};let a=Y(n);try{let d=qe(t.formData);r&&a.search&&et(a.search)&&d.append("index",""),a.search="?"+d}catch{return{path:n,error:new k(400,"Bad Request","Cannot submit binary form data using GET")}}return{path:Ee(a)}}function Re(e,t){let{formMethod:r,formAction:n,formEncType:a,formData:d}=e.navigation;return{state:"loading",location:G(e.location,t.location),formMethod:r||void 0,formAction:n||void 0,formEncType:a||void 0,formData:d||void 0}}function Kt(e,t){let r=e;if(t){let n=e.findIndex(a=>a.route.id===t);n>=0&&(r=e.slice(0,n))}return r}function We(e,t,r,n,a,d,l,f,m,p){let u=m?Object.values(m)[0]:f?Object.values(f)[0]:null,y=m?Object.keys(m)[0]:void 0,w=Kt(t,y).filter((D,N)=>D.route.loader!=null&&(zt(e.loaderData,e.matches[N],D)||d.some(A=>A===D.route.id)||$e(e.location,e.matches[N],r,n,D,a,u))),S=[];return p&&p.forEach((D,N)=>{let[A,B]=D;l.includes(N)?S.push([N,A,B]):a&&$e(A,B,r,A,B,a,u)&&S.push([N,A,B])}),[w,S]}function zt(e,t,r){let n=!t||r.route.id!==t.route.id,a=e[r.route.id]===void 0;return n||a}function Ze(e,t){let r=e.route.path;return e.pathname!==t.pathname||r&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function $e(e,t,r,n,a,d,l){let f=Me(e),m=t.params,p=Me(n),u=a.params,y=Ze(t,a)||f.toString()===p.toString()||f.search!==p.search||d;if(a.route.shouldRevalidate){let i=a.route.shouldRevalidate(M({currentUrl:f,currentParams:m,nextUrl:p,nextParams:u},r,{actionResult:l,defaultShouldRevalidate:y}));if(typeof i=="boolean")return i}return y}async function ie(e,t,r,n,a){n===void 0&&(n=!1),a===void 0&&(a=!1);let d,l,f,m=new Promise((u,y)=>f=y),p=()=>f();t.signal.addEventListener("abort",p);try{let u=r.route[e];C(u,"Could not find the "+e+' to run on the "'+r.route.id+'" route'),l=await Promise.race([u({request:t,params:r.params}),m])}catch(u){d=j.error,l=u}finally{t.signal.removeEventListener("abort",p)}if(l instanceof Response){let u=l.status,y=l.headers.get("Location");if(a)throw l;if(u>=300&&u<=399&&y!=null){if(n)throw l;return{type:j.redirect,status:u,location:y,revalidate:l.headers.get("X-Remix-Revalidate")!==null}}let i,w=l.headers.get("Content-Type");return w&&w.startsWith("application/json")?i=await l.json():i=await l.text(),d===j.error?{type:d,error:new k(u,l.statusText,i),headers:l.headers}:{type:j.data,data:i,statusCode:l.status,headers:l.headers}}return d===j.error?{type:d,error:l}:l instanceof Bt?{type:j.deferred,deferredData:l}:{type:j.data,data:l}}function oe(e,t,r){let n=Me(e).toString(),a={signal:t};if(r){let{formMethod:d,formEncType:l,formData:f}=r;a.method=d.toUpperCase(),a.body=l==="application/x-www-form-urlencoded"?qe(f):f}return new Request(n,a)}function qe(e){let t=new URLSearchParams;for(let[r,n]of e.entries())C(typeof n=="string",'File inputs are not supported with encType "application/x-www-form-urlencoded", please use "multipart/form-data" instead.'),t.append(r,n);return t}function Vt(e,t,r,n,a){let d={},l=null,f,m=!1,p={};return r.forEach((u,y)=>{let i=t[y].route.id;if(C(!q(u),"Cannot handle redirect results in processLoaderData"),le(u)){let w=Z(e,i),S=u.error;n&&(S=Object.values(n)[0],n=void 0),l=Object.assign(l||{},{[w.route.id]:S}),m||(m=!0,f=It(u.error)?u.error.status:500),u.headers&&(p[i]=u.headers)}else V(u)?(a&&a.set(i,u.deferredData),d[i]=u.deferredData.data):(d[i]=u.data,u.statusCode!==200&&!m&&(f=u.statusCode),u.headers&&(p[i]=u.headers))}),n&&(l=n),{loaderData:d,errors:l,statusCode:f||200,loaderHeaders:p}}function Ie(e,t,r,n,a,d,l,f){let{loaderData:m,errors:p}=Vt(t,r,n,a,f);for(let u=0;u<d.length;u++){let[y,,i]=d[u];C(l!==void 0&&l[u]!==void 0,"Did not find corresponding fetcher result");let w=l[u];if(le(w)){let S=Z(e.matches,i.route.id);p&&p[S.route.id]||(p=M({},p,{[S.route.id]:w.error})),e.fetchers.delete(y)}else{if(q(w))throw new Error("Unhandled fetcher revalidation redirect");if(V(w))throw new Error("Unhandled fetcher deferred data");{let S={state:"idle",data:w.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};e.fetchers.set(y,S)}}}return{loaderData:m,errors:p}}function Pe(e,t,r){let n=M({},t);return r.forEach(a=>{let d=a.route.id;t[d]===void 0&&e[d]!==void 0&&(n[d]=e[d])}),n}function Z(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function He(e){let t=e.find(r=>r.index||r.path===""||r.path==="/")||{id:"__shim-404-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t,error:new k(404,"Not Found",null)}}function Ke(e){let t=typeof e=="string"?e:me(e);return console.warn("You're trying to submit to a route that does not have an action.  To fix this, please add an `action` function to the route for "+("["+t+"]")),{type:j.error,error:new k(405,"Method Not Allowed","No action found for ["+t+"]")}}function ze(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(q(r))return r}}function me(e){return(e.pathname||"")+(e.search||"")}function Gt(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash!==t.hash}function V(e){return e.type===j.deferred}function le(e){return e.type===j.error}function q(e){return(e&&e.type)===j.redirect}async function Ve(e,t,r,n,a,d){for(let l=0;l<r.length;l++){let f=r[l],m=t[l],p=e.find(y=>y.route.id===m.route.id),u=p!=null&&!Ze(p,m)&&(d&&d[m.route.id])!==void 0;V(f)&&(a||u)&&await ke(f,n,a).then(y=>{y&&(r[l]=y||r[l])})}}async function ke(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:j.data,data:e.deferredData.unwrappedData}}catch(a){return{type:j.error,error:a}}return{type:j.data,data:e.deferredData.data}}}function et(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Ge(e,t){let{route:r,pathname:n,params:a}=e;return{id:r.id,pathname:n,params:a,data:t[r.id],handle:r.handle}}function Ye(e,t){let r=typeof t=="string"?Y(t).search:t.search;return e[e.length-1].route.index&&!et(r||"")?e.slice(-2)[0]:e.slice(-1)[0]}function Me(e){let t=typeof window<"u"&&typeof window.location<"u"?window.location.origin:"unknown://unknown",r=typeof e=="string"?e:me(e);return new URL(r,t)}export{T as A,It as a,Ct as b,Xt as c,Yt as d,Ee as e,C as i,he as j,ue as m,Y as p,Qt as r,Ft as s};
